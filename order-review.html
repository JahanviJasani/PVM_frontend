<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>PopTalk | Order Review</title>
		<meta content="width=device-width, initial-scale=1.0" name="viewport">

		<!-- Stylesheets -->
		 <link href="css/core.css" rel="stylesheet">
		 <link href="css/style.css" rel="stylesheet">
	</head>
	<body>
		<div class="screen__wrapper d-flex">
			<!-- ======= Header ======= -->
			<header class="header">
				<div class="container d-flex justify-content-between align-items-center h-100">
					<div class="logo h-100">
						<img alt="Poptalk Logo" class="logo__img" src="img/poptalk_logo.png">
					</div>
					<div class="d-flex align-items-center">
						<a href="/"><i class="icon-home header__icon me-18"></i></a>
						<div class="relative">
							<a class="d-block" href="/"><i class="icon-cart header__icon"></i></a>
							<span id="items-selected-count" class="items__count d-flex align-items-center justify-content-center">0</span>
						</div>
					</div>
				</div>
			</header>

			<!-- ======= Content ======= -->
			 <section class="content d-flex flex-column justify-content-between">
				<div class="d-flex align-items-center flex-1 mt-32 mb-32">
					<div class="container">
						<div class="section__header">
							<h1 class="section__title title--one">REVIEW ORDER</h1>							
						</div>
						<div class="relative order__review">
							<div class="swiper">
								<div class="swiper-wrapper"></div>
								<!-- navigation buttons -->
								<div class="custom_button_prev custom_button">
									<img class="button_img" src="img/left__arrow.png" />
								</div>
								<div class="custom_button_next custom_button">
									<img class="button_img" src="img/right__arrow.png" />
								</div>
							</div>
						</div>
						<div class="price text-center mt-32">
							<h2 class="ty__title--one mb-15">TOTAL AMOUNT</h2>
							<span class="d-inline-block popcorn__price sap__price">Rs. <span class="price-value">540.00</span>/-</span>
						</div>
					</div>
				</div>
			 </section>

			<!-- ======= Footer ======= -->
			<footer class="footer">
				<div class="container d-flex align-items-center justify-content-between h-100">
					<div class="footer__left d-flex">
						<a href="/order-snacks" class="btn__main"><i class="icon-chevron-left btn__icon me-6"></i>BACK</a>
					</div>	
					<div class="footer__right d-flex align-items-center">
						<div class="order__id me-24">ORDER ID: 1B28266H</div>
						<a href="/scan-and-pay" class="btn__main">PROCEED TO PAY<i class="icon-chevron-right btn__icon ms-6"></i></a>
					</div>
				</div>	
			</footer>
		</div>
	</body>

	<script id="snack-unit-price-data" type="application/json">
		{
			"Classic Lays": 40,
			"Coke 500ml": 50,
			"Salted Popcorn": 120,
			"Cheese Nachos": 80,
			"Spicy Samosa": 30,
			"Chocolate Muffin": 60,
			"Vanilla Ice Cream": 90,
			"Peanut Butter Cookies": 45
		}
	</script>

	<script>
		document.addEventListener('DOMContentLoaded', function(){

			function buildSlides() {
				var snackPriceMap = {};
				try {
					var unitScript = document.getElementById('snack-unit-price-data');
					if (unitScript) {
						snackPriceMap = JSON.parse(unitScript.textContent || '{}');
					}

					// Inject dynamic slides and unit prices
					var wrapper = document.querySelector(".swiper .swiper-wrapper");
					wrapper.innerHTML = "";

					Object.keys(snackPriceMap).forEach((title, index) => {
						const qtySerial = index + 1;
						var unit = snackPriceMap[title] || 0;
						const slide = document.createElement("div");
						slide.classList.add("swiper-slide");
						slide.innerHTML = `
							<div class="popcorn__block sp__block">
								<div class="pc__block--content">
									<img class="popcorn__img mb-10" src="img/salt_popcorn.png" alt="Salt Popcorn">
									<h3 class="title--two mb-10">${title}</h3>
									<span class="d-inline-block popcorn__price sp__price">Rs. <span class="price-value" data-unit="${unit}">${unit}</span>/-</span>
								</div>
								<div class="popcorn__count d-flex align-items-center justify-content-between">
									<i class="count__icons icon-minus qty-minus" data-target="qty-${qtySerial}"></i>
									<span>0</span>
									<i class="count__icons icon-plus qty-plus" data-target="qty-${qtySerial}"></i>
								</div>
							</div>
						`;
						
						wrapper.appendChild(slide);
				});

				} catch (e) {}
			}

			function initSwiper() {
				new Swiper('.swiper', {
					slidesPerView: 5,  
					spaceBetween: 25,         
					slidesPerView: 4,
					navigation: {
						nextEl: '.custom_button_next',
						prevEl: '.custom_button_prev',
					},
				});
			}
				
			buildSlides();
			initSwiper();

			// try {
			// 	var inactivityTimer = setTimeout(function(){ window.location.href = '/'; }, 30000);
			// 	['click','keydown','touchstart'].forEach(function(evt){
			// 		window.addEventListener(evt, function(){
			// 			clearTimeout(inactivityTimer);
			// 			inactivityTimer = setTimeout(function(){ window.location.href = '/'; }, 30000);
			// 		}, { passive: true });
			// 	});
			// } catch(e) {}
		});
		</script>
	<script src="js/swiper-bundle.min.js"></script>
</html>